<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teachable Machine — Localhost</title>
  
  <style>
    :root { --size:200px; --gap:1rem; }
    html, body { height:100%; }
    body {
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  margin:1rem;
  display:flex;
  flex-direction:column;
  gap:var(--gap);
  align-items:flex-end;
  min-height:100vh;
  box-sizing:border-box;
}

/* centraliza conteúdo verticalmente no topo; remova align-items if quiser centro vertical */
.main {
  width:100%;
  display:flex;
  flex-direction:column;
  gap:var(--gap);
  align-items:flex-end;
}

/* webcam e blocos à direita */
#webcam-container {
  width:var(--size);
  height:var(--size);
  border:1px solid #ddd;
  display:grid;
  place-items:center;
  background:#fafafa;
  text-align:right;
}

/* rótulos à direita */
#label-container {
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  text-align:right;
}
#label-container div { margin:0.2rem 0; font-size:0.95rem; }

/* botões alinhados à direita */
button {
  padding:.4rem .8rem;
  font-size:1rem;
  cursor:pointer;
  align-self:flex-end;
}

/* log com alinhamento à direita mantendo largura máxima */
#log {
  white-space:pre-wrap;
  background:#111;
  color:#e6e6e6;
  padding:.5rem;
  border-radius:4px;
  max-width:300px;
  max-height:220px;
  overflow:auto;
  font-family:monospace;
  font-size:0.85rem;
  text-align:left;
  align-self:flex-end;
}

/* caixa de erro fixa no canto inferior direito */
#errorBox {
  display:none;
  position:fixed;
  right:12px;
  bottom:12px;
  background:#fff;
  border:1px solid #d00;
  padding:12px;
  z-index:9999;
  box-shadow:0 6px 18px rgba(0,0,0,.2);
  text-align:right;
}

.sr-only {
  position:absolute;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0);
  white-space:nowrap;
  border:0;
}
  </style>
  <!-- Bibliotecas: TFJS primeiro, depois teachablemachine-image -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@latest"></script>




</head>
<body>
   <script id="2d-vertex-shader" type="x-shader/x-vertex">
            attribute vec2 a_position;
            varying highp vec2 v_textureCoord;
            void main() {
                /* 
                 * This scales the quad so that the screen texture fits the viewport.
                 * The texture is 256 * 256, but only 240 * 160 is used. The quad is 2*2, centered on (0,0)
                 */
                gl_Position = vec4((a_position.x * 2.0 * 1.0666) - 1.0, (a_position.y * 2.0 * 1.6) * -1.0 + 1.0, 0, 1);
                v_textureCoord = vec2(a_position.x, a_position.y);
            }
        </script>
        <script id="2d-fragment-shader" type="x-shader/x-fragment">
            varying highp vec2 v_textureCoord;
            uniform sampler2D u_sampler;
            void main(void) {
                gl_FragColor = texture2D(u_sampler, vec2(v_textureCoord.s, v_textureCoord.t));
            }
        </script>
    </head>
    <body>
        <div class="ctrl_div">

        </div>
        <div class="pixels" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0;"></div>
        <div style="display: none;" class="ui">
            <div class="ui-border-1">
                <div class="ui-border-2">
                    <section class="load-rom-section">
                        <h2>Load a Gameboy Advance ROM</h2>
                        <div class="gap"></div>
                        <label class="btn" for="load-rom-from-file">From File</label>
                        <div class="gap"></div>
                        <form>
                            <input id="load-rom-from-file" type="file" onchange="window.loadRomFromFile(event);"/>
                        </form>
                    </section>
                    <section class="paused-section" style="display: none;">
                        <h2>Paused</h2>
                        <p style="padding-top: 8px;">
                            Press <span class="unpause-key-prompt"></span> to resume.
                        </p>
                    </section>
                    <section class="savegames-section">
                        <h2>Saves</h2>
                        <div class="gap"></div>
                        <div class="saves-list"></div>
                        <div class="gap"></div>
                        <label class="btn" for="import-save-file">Import Save File</label>
                        <form>
                            <input id="import-save-file" type="file" onchange="vbaSaves.onFileImportInputChanged(event, window.vbaUI.reset.bind(vbaUI));"/>
                        </form>
                    </section>
                    <section>
                        <h2>Keyboard Bindings</h2>
                        <div class="gap"></div>
                        <div class="keyboard-bindings"></div>
                        <div class="gap"></div>
                        <button class="btn reset-bindings-button" onclick="window.vbaUI.resetBindings();">Reset Bindings</button>
                    </section>
                </div>
            </div>
        </div>
        <div class="modal">
            <div class="modal-background"></div>
            <div class="modal-body">
                <h2 class="modal-title">Title</h2>
                <div class="gap"></div>
                <p class="modal-text">Text</p>
                <div class="gap"></div>
                <div class="modal-progress"></div>
                <input class="modal-input"></input>
                <div class="modal-buttons">
                    <div class="btn modal-button-left">Left</div>
                    <div class="btn modal-button-right">Right</div>
                </div>
            </div>
        </div>
        <div class="toast"></div>
        <div class="perf" style="display: none;">
            <span class="perf-left">Game</span><span class="perf-right perf-game">-</span><br/>
            <span class="perf-left">Speed</span><span class="perf-right perf-percentage">-</span><br/>
            <span class="perf-left">On-Time Renders</span><span class="perf-right perf-render-deadlines">-</span><br/>
            <span class="perf-left">On-Time Audio Events</span><span class="perf-right perf-audio-deadlines">-</span><br/>
            <span class="perf-left">Timesteps/Second</span><span class="perf-right perf-timesteps">-</span><br/>
            <span class="perf-left">Audio Lag</span><span class="perf-right perf-audio-lag">-</span><br/>
        </div>
        <script src="./js/index.js"></script>
        <script src="./app.js"></script>
        <script src="./js/main.js"></script>
    </body>

</body>

<body>
  <h1>Reconhecimento com Teachable Machine</h1>

  <div>
    <button id="startImagem">Iniciar Modelo de Imagem</button>
    <button id="startPose">Iniciar Modelo de Pose</button>
    <button id="stopAll">Parar Tudo</button>
  </div>

  <div id="webcam-container"></div>
  <div id="canvas-container">
    <canvas id="canvas"></canvas>
  </div>

  <div id="label-container"></div>

  <div id="log"></div>

  <div id="errorBox">
    <strong id="errorTitle">Erro</strong>
    <pre id="errorDetails"></pre>
    <button id="closeError">Fechar</button>
  </div>

  <!-- Bibliotecas do Teachable Machine -->
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@0.8.4/dist/teachablemachine-pose.min.js"></script>

  <!-- Scripts separados -->
  <script src="imagem.js"></script>
  <script src="pose.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('startImagem').addEventListener('click', () => {
        initModelImagem();
      });

      document.getElementById('startPose').addEventListener('click', () => {
        initModeloPose();
      });

      document.getElementById('stopAll').addEventListener('click', () => {
        location.reload(); // reinicia a página para parar tudo
      });

      document.getElementById('closeError').addEventListener('click', () => {
        document.getElementById('errorBox').style.display = 'none';
      });
    });
  </script>
</body>

</html>